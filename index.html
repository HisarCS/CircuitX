<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CircuitX</title> 
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
  <header class="site-header">
    <img src="assets/header.png" alt="Site header" class="header-image">
    <button id="top-admin-btn" class="top-admin-btn" type="button">Admin</button>
  </header>
  <nav>
    <ul class="nav-tabs">
      <li class="nav-tab"><button class="tab-btn active" data-tab="kits" type="button">Kits</button></li>
      <li class="nav-tab"><button class="tab-btn" data-tab="about" type="button">About</button></li>
      <li class="nav-tab"><button class="tab-btn" data-tab="blogs" type="button">Blogs</button></li>
      <li class="nav-tab"><button class="tab-btn" data-tab="form" type="button">Submit</button></li>
    </ul>
  </nav>

  <main>
    <div class="container">
      <!-- Kits Tab -->
      <div id="kits" class="tab-content active">
        <div class="page-header">
          <h1 class="page-title">Kits</h1>
          <p class="page-subtitle">Latest projects from the community</p>
        </div>
        <div class="projects-grid">
          <!-- Kit cards will be dynamically generated by JavaScript -->
        </div>
      </div>

      <!-- About Tab -->
      <div id="about" class="tab-content">
        <div class="page-header">
          <h1 class="page-title">About Us</h1>
        </div>
        
        <!-- Project Mission Section -->
        <div class="project-mission-section">
          <div class="mission-content">
            <h2 class="mission-title">Project Mission</h2>
            <p class="mission-text">"CircuitX" is an open-source, community-driven platform for FIRST teams to access content, exchange ideas, and inspire creativity in STEM globally. This network is initiated and made by team #6431, NoktaParantez.</p>
            <div class="slide-image-container" data-fallback="Outreach Photo"></div>
          </div>
        </div>
        
        <!-- Collaborated Teams Section -->
        <div id="collaborated-teams" class="collaborated-teams-section">
          <div class="teams-content">
            <h2 class="teams-title">Collaborated Teams</h2>
            <div class="teams-grid">
              <div class="team-card" data-team-id="6431">
                <div class="team-number">6431</div>
                <div class="team-name">NoktaParantez</div>
              </div>
              <div class="team-card" data-team-id="4131">
                <div class="team-number">4131</div>
                <div class="team-name">Iron Patriots</div>
              </div>
              <div class="team-card" data-team-id="2635">
                <div class="team-number">2635</div>
                <div class="team-name">Lake Monsters</div>
              </div> 
            </div>
          </div>
        </div>
        
        <!-- Simple Social Links Section -->
        <div class="social-section">
          <div class="social-content">
            <h2 class="social-title">Socials</h2>

            <div class="social-links-simple">
              <a href="https://www.instagram.com/noktaparantez6431/" target="_blank" class="social-link-simple">Instagram</a>
              <a href="https://github.com/HisarCS" target="_blank" class="social-link-simple">GitHub</a>
              <a href="https://6431.hisarschool.k12.tr/" target="_blank" class="social-link-simple">Team Website</a>
            </div>
          </div>
        </div>
      </div>

      <!-- Blogs Tab -->
      <div id="blogs" class="tab-content">
        <div class="page-header">
          <h1 class="page-title">Blog Posts</h1>
          <p class="page-subtitle">Insights and updates from the FIRST community</p>
        </div>
        <div class="blog-container">
          <!-- Blog posts will be dynamically generated by JavaScript -->
          <a href="https://docs.google.com/forms/d/e/1FAIpQLScG52tNRLvwhizxgVZvjxub3wZOZWKeGt48kp2r-k7jSmtvMw/viewform?usp=header" target="_blank" class="blog-submit-btn">
            <div class="cube">
              <div class="bg-top"><div class="bg-inner"></div></div>
              <div class="bg-right"><div class="bg-inner"></div></div>
              <div class="bg"><div class="bg-inner"></div></div>
              <span class="btn text">Send in a Post</span>
            </div>
          </a>
        </div>
      </div>
  </div>
</div>
      <!-- Submit Form Tab -->
      <div id="form" class="tab-content">
        <div class="page-header">
          <h1 class="page-title">Submit Kit</h1>
          <p class="page-subtitle">Share your innovations with the community</p>
        </div>
        <div class="form-content">
          <h2 class="form-title">Kit Submission</h2>
          <p class="form-description">Submit your FRC kit to share with other teams.</p>
          <a href="https://docs.google.com/forms/d/e/1FAIpQLSd1IsvJH8NOrujPCkJ4-E0-rNf5rMZ3PzI8iDnuaskcSrJV0Q/viewform" target="_blank" class="submit-btn">
            <div class="cube">
              <div class="bg-top"><div class="bg-inner"></div></div>
              <div class="bg-right"><div class="bg-inner"></div></div>
              <div class="bg"><div class="bg-inner"></div></div>
              <span class="btn text">Submit Kit Form</span>
            </div>
          </a>
        </div>
      </div>

      <!-- Admin Tab -->
      <div id="admin" class="tab-content">
        <!-- Login Screen -->
        <div id="admin-login-screen" class="admin-login-screen">
          <div class="admin-login-box">
            <h1>CircuitX Admin</h1>
            <p>Enter password to access dashboard</p>
            <input type="password" id="admin-password-input" placeholder="Password" autocomplete="off">
            <button id="admin-login-btn" class="btn-primary">Login</button>
            <p id="admin-login-error" class="error-message"></p>
          </div>
        </div>

        <!-- Admin Dashboard -->
        <div id="admin-dashboard-content" class="admin-dashboard-content" style="display: none;">
          <div class="admin-header-inline">
            <div class="header-left">
              <h1>CircuitX Admin Dashboard</h1>
              <p class="header-subtitle">Manage kits and blog posts</p>
            </div>
            <div class="admin-actions">
              <button id="admin-save-btn" class="btn-primary">Save All Changes</button>
              <button id="admin-export-kits-btn" class="btn-secondary">Export Kits JSON</button>
              <button id="admin-export-blogs-btn" class="btn-secondary">Export Blogs JSON</button>
              <button id="admin-logout-btn" class="btn-danger">Logout</button>
            </div>
            <div id="file-access-status" class="file-access-status" style="margin-top: 1rem; padding: 0.5rem; background: #1a1a1f; border: 1px solid #ff6b35; border-radius: 4px; color: #888; font-size: 0.85rem;">
              <span id="file-access-text">Auto-save: Will request file access when saving</span>
            </div>
          </div>

          <div class="admin-tabs">
            <button class="admin-tab-btn active" data-admin-tab="kits">Kits</button>
            <button class="admin-tab-btn" data-admin-tab="blogs">Blogs</button>
          </div>

          <!-- Kits Management -->
          <div id="admin-kits-tab" class="admin-tab-content active">
            <div class="section-header">
              <h2>Manage Kits</h2>
              <button id="admin-add-kit-btn" class="btn-add">Add New Kit</button>
            </div>
            
            <div id="admin-kits-list" class="items-list">
              <!-- Kit cards will be generated here -->
            </div>
          </div>

          <!-- Blogs Management -->
          <div id="admin-blogs-tab" class="admin-tab-content">
            <div class="section-header">
              <h2>Manage Blog Posts</h2>
              <button id="admin-add-blog-btn" class="btn-add">Add New Blog</button>
            </div>
            
            <div id="admin-blogs-list" class="items-list">
              <!-- Blog cards will be generated here -->
            </div>
          </div>
        </div>
      </div>

      <!-- Project Detail Page -->
      <div id="project-page" class="tab-content project-page">
        <div class="project-header">
          <button class="back-btn" type="button">
            <div class="cube">
              <div class="bg-top"><div class="bg-inner"></div></div>
              <div class="bg-right"><div class="bg-inner"></div></div>
              <div class="bg"><div class="bg-inner"></div></div>
              <span class="btn text">← Back to Kits</span>
            </div>
          </button>
          <h1 class="project-page-title">Project Name</h1>
          <button id="description-panel-btn" class="description-panel-btn" type="button">
            <div class="cube">
              <div class="bg-top"><div class="bg-inner"></div></div>
              <div class="bg-right"><div class="bg-inner"></div></div>
              <div class="bg"><div class="bg-inner"></div></div>
              <span class="btn text">Description</span>
            </div>
          </button>
        </div>
        <div class="project-content-container">
          <div class="video-section">
            <div class="video-container">Video Preview</div>
          </div>
          <div id="dynamic-sections">
            <!-- Sections will be dynamically generated based on available content -->
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Description Side Panel -->
  <div id="description-panel-overlay" class="description-panel-overlay">
    <div class="description-panel">
      <div class="description-panel-header">
        <h2 class="description-panel-title">Description</h2>
        <button id="description-panel-close" class="panel-close-btn" type="button">
          <span class="close-icon">×</span>
        </button>
      </div>
      <div class="description-panel-content">
        <div id="description-panel-text" class="description-panel-text">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </div>
      </div>
    </div>
  </div>

  <!-- Team Popup Modal -->
  <div id="team-popup-overlay" class="popup-overlay">
    <div class="team-popup">
      <div class="popup-header">
        <h2 id="popup-team-title" class="popup-title">Team Information</h2>
        <button id="popup-close" class="popup-close" type="button">
          <span class="close-icon">×</span>
        </button>
      </div>
      <div class="popup-content">
        <div class="team-info">
          <div id="popup-team-number" class="popup-team-number">6431</div>
          <div id="popup-team-name" class="popup-team-name">NoktaParantez</div>
          <div id="popup-team-description" class="popup-team-description">
            FIRST Robotics Competition team from Istanbul, Turkey
          </div>
        </div>
        <div class="team-social-links">
          <h3 class="social-header">Connect with Team</h3>
          <div id="popup-social-links" class="popup-social-grid">
            <!-- Social links will be populated dynamically -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Admin Kit Editor Modal -->
  <div id="kit-modal" class="modal">
    <div class="modal-content large-modal">
      <div class="modal-header">
        <h2 id="kit-modal-title">Edit Kit</h2>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <form id="kit-form">
          <div class="form-row">
            <div class="form-group">
              <label>Kit ID (URL-friendly, lowercase, no spaces)</label>
              <input type="text" id="kit-id" required pattern="[a-z0-9_-]+" placeholder="e.g., automata">
              <small>Used in URLs. Cannot be changed after creation.</small>
            </div>
            
            <div class="form-group">
              <label>Title</label>
              <input type="text" id="kit-title" required placeholder="e.g., Automata">
            </div>
          </div>
          
          <div class="form-group">
            <label>Team Name</label>
            <input type="text" id="kit-team" required placeholder="e.g., Noktaparantez #6431">
          </div>
          
          <div class="form-group">
            <label>Short Description</label>
            <textarea id="kit-description" rows="3" required placeholder="Brief description shown on kit card"></textarea>
          </div>
          
          <div class="form-group">
            <label>Detailed Description</label>
            <textarea id="kit-detailed-description" rows="5" placeholder="Full description shown in detail panel"></textarea>
          </div>
          
          <div class="form-group">
            <label>Cover Image</label>
            <div class="file-upload-area" id="cover-upload">
              <p>Drag & drop cover image here or click to browse</p>
              <input type="file" id="cover-file" accept="image/*" style="display: none;">
              <div id="cover-preview" class="image-preview"></div>
            </div>
            <input type="text" id="cover-path" placeholder="assets/kit-name/cover.png" class="path-input">
            <small>Path relative to project root</small>
          </div>
          
          <div class="form-group">
            <div class="category-header">
              <label>Kit Assets</label>
              <button type="button" id="add-category-btn" class="btn-add-small">Add Category</button>
            </div>
            <div class="file-categories" id="file-categories-container">
              <!-- Categories will be dynamically generated here -->
            </div>
          </div>
          
          <div class="modal-actions">
            <button type="button" class="btn-secondary" id="kit-cancel-btn">Cancel</button>
            <button type="submit" class="btn-primary">Save Kit</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Admin Blog Editor Modal -->
  <div id="blog-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="blog-modal-title">Edit Blog Post</h2>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <form id="blog-form">
          <div class="form-group">
            <label>Blog ID (URL-friendly)</label>
            <input type="text" id="blog-id" required pattern="[a-z0-9_-]+" placeholder="e.g., blog1">
          </div>
          
          <div class="form-group">
            <label>Title</label>
            <input type="text" id="blog-title" required>
          </div>
          
          <div class="form-group">
            <label>Content</label>
            <textarea id="blog-text" rows="6" required></textarea>
          </div>
          
          <div class="form-group">
            <label>Image</label>
            <div class="file-upload-area" id="blog-image-upload">
              <p>Drag & drop image here or click to browse</p>
              <input type="file" id="blog-image-file" accept="image/*" style="display: none;">
              <div id="blog-image-preview" class="image-preview"></div>
            </div>
            <input type="text" id="blog-image-path" placeholder="blog1.png" class="path-input">
            <small>Path relative to project root</small>
          </div>
          
          <div class="modal-actions">
            <button type="button" class="btn-secondary" id="blog-cancel-btn">Cancel</button>
            <button type="submit" class="btn-primary">Save Blog</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Admin Modal Overlay -->
  <div id="admin-modal-overlay" class="modal-overlay"></div>

  <!-- Dynamic Image Loader for About Page -->
  <script>
    // Load Project Mission image (about4.png)
    const missionImageContainer = document.querySelector('.project-mission-section .slide-image-container');
    if (missionImageContainer) {
      const missionImg = new Image();
      missionImg.src = 'about4.png';
      missionImg.alt = 'Outreach Photo';
      missionImg.className = 'slide-image';
      
      missionImg.onload = () => {
        missionImageContainer.appendChild(missionImg);
      };
      
      missionImg.onerror = () => {
        const fallback = document.createElement('div');
        fallback.className = 'photo-placeholder-slide';
        fallback.textContent = 'Outreach Photo';
        missionImageContainer.appendChild(fallback);
      };
    }

    // Load slider images (about2.png, about3.png) - Skip first slide as it has social links
    const sliderImageContainers = document.querySelectorAll('.slider-container .slide-image-container');
    sliderImageContainers.forEach((container, index) => {
      // Skip the first slide (index 0) since it has social links instead of image
      const imageIndex = index + 2; // Start from about2.png
      if (imageIndex <= 3) { // Only load about2.png and about3.png
        const img = new Image();
        img.src = `about${imageIndex}.png`;
        img.alt = container.dataset.fallback;
        img.className = 'slide-image';
        
        img.onload = () => {
          container.appendChild(img);
        };
        
        img.onerror = () => {
          const fallback = document.createElement('div');
          fallback.className = 'photo-placeholder-slide';
          fallback.textContent = container.dataset.fallback;
          container.appendChild(fallback);
        };
      }
    });
  </script>

  <!-- PDF.js Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>
    // Configure PDF.js worker
    if (typeof pdfjsLib !== 'undefined') {
      pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    }
  </script>

  <!-- Main JavaScript Application -->
  <script src="script.js"></script>
  <script src="admin.js"></script>
</body>
</html>
